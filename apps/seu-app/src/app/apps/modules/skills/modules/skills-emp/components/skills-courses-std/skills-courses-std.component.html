<seu-loader [isLoading]="isLoading"></seu-loader>
<section *ngIf="!isLoading" class="dashboard-wrap" style="margin-top: 10px; padding: 0 30px;">
    <div class="row" style="margin-top: 20px;">
        <div class="col-md-6">
            <input type="text" class="form-control" [(ngModel)]="filter"  placeholder="{{'std_courses.search' | translate}}">
        </div>
        <div class="col-md-6">
            <form role="form" [formGroup]="AddStdForm">
                <div class="form-group">
                    <input style="display: inline-block; width: 70%;" type="number" class="form-control" formControlName="STD_ID"
                        placeholder="{{'courses.std_no' | translate}}">
                    <button style="display: inline-block; width: 25%; margin-right: 3%;" [disabled]="submitted || AddStdForm.invalid" (click)="onSubmit()" type="submit"
                     class="btn btn-primary">{{'courses.add_std' | translate}}</button>
                </div>
            </form>
        </div>
    </div>
    <div class="row" style="margin-top: 20px;">
        <div *ngIf="courseStudents.length == 0" class="col-md-12">
            <div class="alert alert-info text-center">
                {{"courses.empty_std" | translate}}
            </div>
        </div>
        <div *ngIf="courseStudents.length > 0" class="col-md-12">
            <div class="table-responsive">
                <table class="table table-striped table-bordered">
                    <thead>
                        <tr>
                            <th>
                                <div class="form-check">
                                    <input style="width: 20px; height: 20px; position: relative; top: 5px; cursor: pointer;" class="form-check-input" type="checkbox" (change)="setAll($event)">
                                </div>
                            </th>
                            <th scope="col">{{"courses.std_no" | translate}}</th>
                            <th scope="col">{{"courses.std_name" | translate}}</th>
                            <th scope="col">{{"courses.std_coll" | translate}}</th>
                            <th scope="col">{{"courses.std_dept" | translate}}</th>
                            <th scope="col">{{"courses.std_level" | translate}}</th>
                            <th scope="col">{{"courses.status" | translate}}</th>
                            <th scope="col">{{"courses.actions" | translate}}</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let std of courseStudents | filter:filter ; let i = index">
                            <td>
                                <div class="form-check">
                                    <input [disabled]="std.STATUS == 'rejected' || std.STATUS == 'approved'" style="width: 20px; height: 20px; position: relative; top: 5px; cursor: pointer;" class="form-check-input" type="checkbox" (change)="pushIds($event, std.REC_ID)">
                                </div>
                            </td>
                            <td>{{std.STD_ID}}</td>
                            <td>{{std.FULL_NAME_AR}}</td>
                            <td>{{std.COLL_TITLE_AR}}</td>
                            <td>{{std.DEPT_DESC_AR}}</td>
                            <td>{{std.CLASS_LEVEL}}</td>
                            <td>
                                <span>{{"statuses."+std.STATUS | translate}}</span>
                            </td>
                            <td>
                                <button [disabled]="std.STATUS == 'rejected' || std.STATUS == 'approved'"
                                    (click)="changeStatus(std.REC_ID, std.STATUS)"
                                    class="btn btn-danger">{{"courses.change_status" | translate}}</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
                <select [disabled]="reqIds.length == 0" style="width: 30%; display: inline-block;" [(ngModel)]="status" class="form-control" id="status">
                    <option value="registered">{{"statuses.registered"|translate}}</option>
                    <option value="approved">{{"statuses.approved"|translate}}</option>
                    <option value="rejected">{{"statuses.rejected"|translate}}</option>
                </select>
                <button [disabled]="reqIds.length == 0" style="width: 15%; display: inline-block; margin-right: 1%;" type="button" (click)="changeBulkStatus()" class="btn btn-primary">{{"general.save"|translate}}</button>
            </div>
        </div>
    </div>
</section>