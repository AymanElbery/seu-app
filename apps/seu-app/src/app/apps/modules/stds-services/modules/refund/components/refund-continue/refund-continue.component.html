<mat-dialog-content dir="rtl" style="max-height: 85vh;">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <form role="form" [formGroup]="continous_request_form" autocomplete="off" (submit)="onSubmit()">
                <div class="modal-header">
                    <h5 class="modal-title">{{"refund.add_refund_continous_request"|translate}}</h5>
                </div>
                <div class="modal-body" style="min-height: 30vh;">
                    <section>
                        <div class="container">
                            <div class="row">
                                <div class="col-12">
                                    <div class="state">
                                        <h6>{{"refund.bank_label"|translate}}</h6>
                                    </div>
                                </div>
                                <div class="col-6">
                                    <div style="width: 100%;">
                                        <input (change)="change_radio($event)" style="cursor: pointer; width: 17px; height: 17px;" type="radio" class="btn-check" name="BANK_IS_YOURS" formControlName="BANK_IS_YOURS" id="btn-check-outlined1" autocomplete="off" value="1">
                                        <label class="mr-1" for="btn-check-outlined1">{{"refund.bank_is_yours"|translate}}</label>
                                    </div>
                                </div>
                                <div class="col-6">
                                    <div style="width: 100%; cursor: pointer;">
                                        <input (change)="change_radio($event)" style="cursor: pointer; width: 17px; height: 17px;" type="radio" class="btn-check" name="BANK_IS_YOURS"  formControlName="BANK_IS_YOURS" id="btn-check-outlined1" autocomplete="off" value="0">
                                        <label class="mr-1" for="btn-check-outlined2">{{"refund.bank_is_not_yours"|translate}}</label>
                                    </div>
                                </div>
                            </div>
                            <div *ngIf="is_yours_bank != 2" class="row ser-block">
                                <div class="col-md-12 col-sm-12">
                                    <div class="state">
                                        <h6>{{"refund.dob"|translate}}<span class="reqstart">*</span></h6>
                                        <input type="text" formControlName="DOB" bsDatepicker [bsConfig]="datePickerConfig" class="form-control" />
                                    </div>
                                    <strong class="text-danger mr-3 d-block" *ngIf="submitted && continous_request_form.controls.DOB.errors && continous_request_form.controls.DOB.errors.required">{{ "refund.errors.required" | translate}}</strong>
                                </div>
                            </div>
                            <div *ngIf="is_yours_bank == 0" class="row border-secondary border-1 rounded-2 p-1">
                                <div class="col-md-12 col-sm-12">
                                    <div class="state">
                                        <h6>{{"refund.full_name"|translate}}<span class="reqstart">*</span></h6>
                                        <input type="text" formControlName="FULL_NAME" class="form-control" />
                                    </div>
                                    <strong class="text-danger mr-3 d-block" *ngIf="submitted && continous_request_form.controls.FULL_NAME.errors && continous_request_form.controls.FULL_NAME.errors.required">{{ "refund.errors.required" | translate}}</strong>
                                </div>
                                <div class="col-md-12 col-sm-12">
                                    <div class="state">
                                        <h6>{{"refund.snn"|translate}}<span class="reqstart">*</span></h6>
                                        <input type="text" formControlName="SNN" class="form-control" />
                                    </div>
                                    <strong class="text-danger mr-3 d-block" *ngIf="submitted && continous_request_form.controls.SNN.errors && continous_request_form.controls.SNN.errors.required">{{ "refund.errors.required" | translate}}</strong>
                                    <strong class="text-danger mr-3 d-block" *ngIf="submitted && continous_request_form.controls.SNN.errors && continous_request_form.controls.SNN.errors.minlength">{{ "refund.errors.snn_minlength" | translate}}</strong>
                                    <strong class="text-danger mr-3 d-block" *ngIf="submitted && continous_request_form.controls.SNN.errors && continous_request_form.controls.SNN.errors.maxlength">{{ "refund.errors.snn_maxlength" | translate}}</strong>
                                    <strong class="text-danger mr-3 d-block" *ngIf="submitted && continous_request_form.controls.SNN.errors && continous_request_form.controls.SNN.errors.pattern">{{ "refund.errors.snn_pattern" | translate}}</strong>
                                </div>
                                <div class="col-md-12 col-sm-12">
                                    <div class="state">
                                        <h6>{{"refund.phone"|translate}}<span class="reqstart">*</span></h6>
                                        <input placeholder='{{"refund.phone_pattern"|translate}}' type="text" formControlName="PHONE" class="form-control" />
                                    </div>
                                    <strong class="text-danger mr-3 d-block" *ngIf="submitted && continous_request_form.controls.PHONE.errors && continous_request_form.controls.PHONE.errors.required">{{ "refund.errors.required" | translate}}</strong>
                                    <strong class="text-danger mr-3 d-block" *ngIf="submitted && continous_request_form.controls.PHONE.errors && continous_request_form.controls.PHONE.errors.minlength">{{ "refund.errors.phone_minlength" | translate}}</strong>
                                    <strong class="text-danger mr-3 d-block" *ngIf="submitted && continous_request_form.controls.PHONE.errors && continous_request_form.controls.PHONE.errors.maxlength">{{ "refund.errors.phone_maxlength" | translate}}</strong>
                                    <strong class="text-danger mr-3 d-block" *ngIf="submitted && continous_request_form.controls.PHONE.errors && continous_request_form.controls.PHONE.errors.pattern">{{ "refund.errors.phone_pattern" | translate}}</strong>
                                </div>
                            </div>
                            <div *ngIf="is_yours_bank != 2" class="row ser-block mt-2">
                                <div class="col-md-12 col-sm-12">
                                    <div class="state">
                                        <h6>{{"refund.holder_name"|translate}}<span class="reqstart">*</span></h6>
                                        <input type="text" formControlName="HOLDER_NAME" class="form-control" />
                                    </div>
                                    <strong class="text-danger mr-3 d-block" *ngIf="submitted && continous_request_form.controls.HOLDER_NAME.errors && continous_request_form.controls.HOLDER_NAME.errors.required">{{ "refund.errors.required" | translate}}</strong>
                                </div>
                                <div class="col-md-12 col-sm-12">
                                    <div class="state">
                                        <h6>{{"refund.banks"|translate}}<span class="reqstart">*</span></h6>
                                        <ng-select [items]="banks" bindLabel="USED_FOR" bindValue="IBAN" formControlName="BANK">
                                        </ng-select>
                                    </div>
                                    <strong class="text-danger mr-3 d-block" *ngIf="submitted && continous_request_form.controls.BANK.errors && continous_request_form.controls.BANK.errors.required">{{ "refund.errors.required" | translate}}</strong>
                                </div>
                                <div class="col-md-12 col-sm-12" *ngIf="continous_request_form.controls.BANK.value">
                                    <div class="state" *ngIf="continous_request_form.controls.IBAN.value">
                                        <h6 style="padding: 5px; border-radius: 2px; background-color: #001d6c; color: #FFF; text-align: center; text-transform: uppercase; ">{{ continous_request_form.controls.IBAN.value | iban : "-"}}</h6>
                                    </div>
                                    <div class="state">
                                        <h6>{{"refund.iban"|translate}}<span class="reqstart">*</span></h6>
                                        <input (keypress)="restrict_iban_length($event)" style="text-transform: uppercase;" type="text" formControlName="IBAN" class="form-control" />
                                    </div>
                                    <strong class="text-danger mr-3 d-block" *ngIf="submitted && continous_request_form.controls.IBAN.errors && continous_request_form.controls.IBAN.errors.required">{{ "refund.errors.required" | translate}}</strong>
                                    <strong class="text-danger mr-3 d-block" *ngIf="submitted && continous_request_form.controls.IBAN.errors && continous_request_form.controls.IBAN.errors.invalidIBAN">{{ "refund.errors.invalidIBAN" | translate}}</strong>
                                    <strong class="text-danger mr-3 d-block" *ngIf="submitted && continous_request_form.controls.IBAN.errors && continous_request_form.controls.IBAN.errors.mustMatch">{{ "refund.errors.mustMatch" | translate}}</strong>
                                </div>
                                <div class="col-md-12 col-sm-12" *ngIf="continous_request_form.controls.BANK.value">
                                    <div class="state">
                                        <h6>{{"refund.bank_iban"|translate}}</h6>
                                        <input type="file" accept="*/*" (change)="handleInputChange($event)" id="file" class="form-control-file form-control">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>
                <div class="modal-footer">
                    <button [disabled]="!continous_request_form.valid && submitted" type="submit" class="btn btn-dark"><i class="fa fa-database"></i>
                        {{"refund.send"|translate}}</button>
                </div>
            </form>
        </div>
    </div>
</mat-dialog-content>